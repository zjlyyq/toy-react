{"version":3,"sources":["webpack://toy-react/./main.js","webpack://toy-react/./toy-react.js","webpack://toy-react/webpack/bootstrap","webpack://toy-react/webpack/runtime/define property getters","webpack://toy-react/webpack/runtime/hasOwnProperty shorthand","webpack://toy-react/webpack/runtime/make namespace object","webpack://toy-react/webpack/startup"],"names":["MyConponent","state","a","b","setState","Component","Square","props","onClick","value","Board","i","squares","renderSquare","Game","history","Array","fill","stepNumber","xIsNext","slice","current","length","calculateWinner","concat","step","winner","moves","map","move","desc","jumpTo","status","handleClick","game","render","document","getElementById","console","log","lines","c","RENDER_TO_DOM","Symbol","Object","create","_root","_vdom","children","vchildren","_range","attr","child","push","range","vdom","isSameNode","oldNode","newNode","type","keys","content","update","newChildren","oldChildren","newChild","oldChild","deleteContents","newState","merge","oldState","p","ElementWrapper","root","createElement","setAttribute","match","name","RegExp","$1","addEventListener","replace","toLowerCase","createRange","setStart","childNodes","setEnd","replaceRange","node","insertNode","setStartAfter","setStartBefore","setEndAfter","TextWrapper","createTextNode","tagName","attributes","dom","handleChildren","appendChild","component","parentDom"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;IAGMA,W;;;;;AACF,yBAAc;AAAA;;AAAA;;AACV;AACA,UAAKC,KAAL,GAAa;AACTC,OAAC,EAAE,CADM;AAETC,OAAC,EAAE;AAFM,KAAb;AAFU;AAMb;;;;6BACQ;AAAA;;AACL;AACA,aACI,uEAGI;AAAG,aAAK,EAAC;AAAT,SACK,KAAKF,KAAL,CAAWC,CADhB,CAHJ,EAMI;AAAQ,UAAE,EAAC,IAAX;AAAgB,eAAO,EAAE,mBAAM;AAAE,gBAAI,CAACE,QAAL,CAAc;AAAEF,aAAC,EAAE,MAAI,CAACD,KAAL,CAAWC,CAAX,GAAa;AAAlB,WAAd;AAAsC;AAAvE,eANJ,CADJ;AAWH;;;;EArBqBG,iD,GAyB1B;AACA;AACA;AACA;AAEA;;;IACMC,M;;;;;AACF,oBAAc;AAAA;;AAAA;AAEb;;;;6BAEQ;AACL,aACI;AAAQ,iBAAS,EAAC,QAAlB;AAA2B,eAAO,EAAE,KAAKC,KAAL,CAAWC;AAA/C,SACK,KAAKD,KAAL,CAAWE,KADhB,CADJ;AAKH;;;;EAXgBJ,iD;;IAcfK,K;;;;;;;;;;;;;iCACWC,C,EAAG;AAAA;;AACZ,aACI,0DAAC,MAAD;AACI,aAAK,EAAE,KAAKJ,KAAL,CAAWK,OAAX,CAAmBD,CAAnB,CADX;AAEI,eAAO,EAAE;AAAA,iBAAM,MAAI,CAACJ,KAAL,CAAWC,OAAX,CAAmBG,CAAnB,CAAN;AAAA;AAFb,QADJ;AAMH;;;6BAEQ;AACL,aACI,uEACI;AAAK,iBAAS,EAAC;AAAf,SACK,KAAKE,YAAL,CAAkB,CAAlB,CADL,EAEK,KAAKA,YAAL,CAAkB,CAAlB,CAFL,EAGK,KAAKA,YAAL,CAAkB,CAAlB,CAHL,CADJ,EAMI;AAAK,iBAAS,EAAC;AAAf,SACK,KAAKA,YAAL,CAAkB,CAAlB,CADL,EAEK,KAAKA,YAAL,CAAkB,CAAlB,CAFL,EAGK,KAAKA,YAAL,CAAkB,CAAlB,CAHL,CANJ,EAWI;AAAK,iBAAS,EAAC;AAAf,SACK,KAAKA,YAAL,CAAkB,CAAlB,CADL,EAEK,KAAKA,YAAL,CAAkB,CAAlB,CAFL,EAGK,KAAKA,YAAL,CAAkB,CAAlB,CAHL,CAXJ,CADJ;AAmBH;;;;EA9BeR,iD;;IAiCdS,I;;;;;AACF,kBAAc;AAAA;;AAAA;;AACV;AACA,WAAKb,KAAL,GAAa;AACTc,aAAO,EAAE,CACL;AACIH,eAAO,EAAEI,KAAK,CAAC,CAAD,CAAL,CAASC,IAAT,CAAc,IAAd;AADb,OADK,CADA;AAMTC,gBAAU,EAAE,CANH;AAOTC,aAAO,EAAE;AAPA,KAAb;AAFU;AAWb;;;;gCAEWR,C,EAAG;AACX;AACA,UAAMI,OAAO,GAAG,KAAKd,KAAL,CAAWc,OAAX,CAAmBK,KAAnB,CAAyB,CAAzB,EAA4B,KAAKnB,KAAL,CAAWiB,UAAX,GAAwB,CAApD,CAAhB;AACA,UAAMG,OAAO,GAAGN,OAAO,CAACA,OAAO,CAACO,MAAR,GAAiB,CAAlB,CAAvB;AACA,UAAMV,OAAO,GAAGS,OAAO,CAACT,OAAR,CAAgBQ,KAAhB,EAAhB;;AACA,UAAIG,eAAe,CAACX,OAAD,CAAf,IAA4BA,OAAO,CAACD,CAAD,CAAvC,EAA4C;AACxC;AACH;;AACDC,aAAO,CAACD,CAAD,CAAP,GAAa,KAAKV,KAAL,CAAWkB,OAAX,GAAqB,GAArB,GAA2B,GAAxC;AACA,WAAKf,QAAL,CAAc;AACVW,eAAO,EAAEA,OAAO,CAACS,MAAR,CAAe,CACpB;AACIZ,iBAAO,EAAEA;AADb,SADoB,CAAf,CADC;AAMVM,kBAAU,EAAEH,OAAO,CAACO,MANV;AAOVH,eAAO,EAAE,CAAC,KAAKlB,KAAL,CAAWkB;AAPX,OAAd;AASH;;;2BAEMM,I,EAAM;AACT,WAAKrB,QAAL,CAAc;AACVc,kBAAU,EAAEO,IADF;AAEVN,eAAO,EAAGM,IAAI,GAAG,CAAR,KAAe;AAFd,OAAd;AAIH;;;6BAEQ;AAAA;;AACL,UAAMV,OAAO,GAAG,KAAKd,KAAL,CAAWc,OAA3B;AACA,UAAMM,OAAO,GAAGN,OAAO,CAAC,KAAKd,KAAL,CAAWiB,UAAZ,CAAvB;AACA,UAAMQ,MAAM,GAAGH,eAAe,CAACF,OAAO,CAACT,OAAT,CAA9B;AAEA,UAAMe,KAAK,GAAGZ,OAAO,CAACa,GAAR,CAAY,UAACH,IAAD,EAAOI,IAAP,EAAgB;AACtC,YAAMC,IAAI,GAAGD,IAAI,GACb,iBAAiBA,IADJ,GAEb,kBAFJ;AAGA,eACI;AAAI,aAAG,EAAEA;AAAT,WACI;AAAQ,iBAAO,EAAE;AAAA,mBAAM,MAAI,CAACE,MAAL,CAAYF,IAAZ,CAAN;AAAA;AAAjB,WAA2CC,IAA3C,CADJ,CADJ;AAKH,OATa,CAAd;AAWA,UAAIE,MAAJ;;AACA,UAAIN,MAAJ,EAAY;AACRM,cAAM,GAAG,aAAaN,MAAtB;AACH,OAFD,MAEO;AACHM,cAAM,GAAG,mBAAmB,KAAK/B,KAAL,CAAWkB,OAAX,GAAqB,GAArB,GAA2B,GAA9C,CAAT;AACH;;AAED,aACI;AAAK,iBAAS,EAAC;AAAf,SACI;AAAK,iBAAS,EAAC;AAAf,SACI,0DAAC,KAAD;AACI,eAAO,EAAEE,OAAO,CAACT,OADrB;AAEI,eAAO,EAAE,iBAAAD,CAAC;AAAA,iBAAI,MAAI,CAACsB,WAAL,CAAiBtB,CAAjB,CAAJ;AAAA;AAFd,QADJ,CADJ,EAOI;AAAK,iBAAS,EAAC;AAAf,SACI,uEAAMqB,MAAN,CADJ,EAEI,sEAAKL,KAAL,CAFJ,CAPJ,CADJ;AAcH;;;;EA9EctB,iD,GAiFnB;;;AACA,IAAI6B,IAAI,GAAG,0DAAC,IAAD,OAAX;AACAC,kDAAM,CAACD,IAAD,EAAOE,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CAAP,CAAN;AACAC,OAAO,CAACC,GAAR,CAAYL,IAAZ;;AAEA,SAASX,eAAT,CAAyBX,OAAzB,EAAkC;AAC9B,MAAM4B,KAAK,GAAG,CACV,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CADU,EAEV,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAFU,EAGV,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAHU,EAIV,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAJU,EAKV,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CALU,EAMV,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CANU,EAOV,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAPU,EAQV,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CARU,CAAd;;AAUA,OAAK,IAAI7B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6B,KAAK,CAAClB,MAA1B,EAAkCX,CAAC,EAAnC,EAAuC;AAAA,kCACjB6B,KAAK,CAAC7B,CAAD,CADY;AAAA,QAC5BT,CAD4B;AAAA,QACzBC,CADyB;AAAA,QACtBsC,CADsB;;AAEnC,QAAI7B,OAAO,CAACV,CAAD,CAAP,IAAcU,OAAO,CAACV,CAAD,CAAP,KAAeU,OAAO,CAACT,CAAD,CAApC,IAA2CS,OAAO,CAACV,CAAD,CAAP,KAAeU,OAAO,CAAC6B,CAAD,CAArE,EAA0E;AACtE,aAAO7B,OAAO,CAACV,CAAD,CAAd;AACH;AACJ;;AACD,SAAO,IAAP;AACH,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzLD,IAAMwC,aAAa,GAAGC,MAAM,CAAC,eAAD,CAA5B;AAEO,IAAMtC,SAAb;AACI,uBAAc;AAAA;;AACV,SAAKE,KAAL,GAAaqC,MAAM,CAACC,MAAP,CAAc,IAAd,CAAb;AACA,SAAKC,KAAL,GAAa,IAAb;AACA,SAAKC,KAAL,GAAa,IAAb;AACA,SAAKC,QAAL,GAAgB,EAAhB;AACA,SAAKC,SAAL,GAAiB,EAAjB;AACA,SAAKC,MAAL,GAAc,IAAd;AACH;;AARL;AAAA;AAAA,iCAUiBC,IAVjB,EAUuB1C,KAVvB,EAU8B;AACtB,WAAKF,KAAL,CAAW4C,IAAX,IAAmB1C,KAAnB;AACH;AAZL;AAAA;AAAA,gCAcgB2C,KAdhB,EAcuB;AACf,WAAKJ,QAAL,CAAcK,IAAd,CAAmBD,KAAnB,EADe,CAEf;AACH;AAjBL;AAAA,SAmBKV,aAnBL;AAAA,0BAmBoBY,KAnBpB,EAmB2B;AACnB,WAAKJ,MAAL,GAAcI,KAAd,CADmB,CAEnB;AACA;;AACA,WAAKP,KAAL,GAAa,KAAKQ,IAAlB;;AACA,WAAKR,KAAL,CAAWL,aAAX,EAA0BY,KAA1B;AACH;AAzBL;AAAA;AAAA,6BAiCa;AACL,UAAIE,UAAU,GAAG,SAAbA,UAAa,CAACC,OAAD,EAAUC,OAAV,EAAsB;AACnC,YAAID,OAAO,CAACE,IAAR,KAAiBD,OAAO,CAACC,IAA7B,EACI,OAAO,KAAP;;AACJ,aAAK,IAAIR,IAAT,IAAiBO,OAAO,CAACnD,KAAzB,EAAgC;AAC5B,cAAIkD,OAAO,CAAClD,KAAR,CAAc4C,IAAd,MAAwBO,OAAO,CAACnD,KAAR,CAAc4C,IAAd,CAA5B,EACI,OAAO,KAAP;AACP;;AACD,YAAIP,MAAM,CAACgB,IAAP,CAAYH,OAAO,CAAClD,KAApB,EAA2Be,MAA3B,GAAoCsB,MAAM,CAACgB,IAAP,CAAYF,OAAO,CAACnD,KAApB,EAA2Be,MAAnE,EACI,OAAO,KAAP;;AACJ,YAAIoC,OAAO,CAACC,IAAR,KAAiB,OAArB,EAA8B;AAC1B,cAAID,OAAO,CAACG,OAAR,KAAoBJ,OAAO,CAACI,OAAhC,EACI,OAAO,KAAP;AACP;;AAED,eAAO,IAAP;AACH,OAfD;;AAgBA,UAAIC,MAAM,GAAG,SAATA,MAAS,CAACL,OAAD,EAAUC,OAAV,EAAsB;AAC/B;AACA,YAAI,CAACF,UAAU,CAACC,OAAD,EAAUC,OAAV,CAAf,EAAmC;AAC/BA,iBAAO,CAAChB,aAAD,CAAP,CAAuBe,OAAO,CAACP,MAA/B;AACA;AACH;;AACDQ,eAAO,CAACR,MAAR,GAAiBO,OAAO,CAACP,MAAzB;AAEA,YAAIa,WAAW,GAAGL,OAAO,CAACT,SAA1B;AACA,YAAIe,WAAW,GAAGP,OAAO,CAACR,SAA1B;;AAEA,aAAI,IAAItC,CAAC,GAAG,CAAZ,EAAcA,CAAC,GAAGoD,WAAW,CAACzC,MAA9B,EAAqCX,CAAC,EAAtC,EAA2C;AACvC,cAAIsD,QAAQ,GAAGF,WAAW,CAACpD,CAAD,CAA1B;AACA,cAAIuD,QAAQ,GAAGF,WAAW,CAACrD,CAAD,CAA1B;;AACA,cAAIA,CAAC,GAAGqD,WAAW,CAAC1C,MAApB,EAA4B;AACxBwC,kBAAM,CAACI,QAAD,EAAWD,QAAX,CAAN;AACH,WAFD,MAEM;AACF;AACAP,mBAAO,CAAChB,aAAD,CAAP,CAAuBe,OAAO,CAACP,MAA/B;AACH;AACJ;AACJ,OArBD;;AAsBA,UAAIK,IAAI,GAAG,KAAKA,IAAhB,CAvCK,CAuCkB;;AACvBO,YAAM,CAAC,KAAKf,KAAN,EAAaQ,IAAb,CAAN,CAxCK,CAyCL;;AACA,WAAKR,KAAL,GAAaQ,IAAb;AACH,KA5EL,CA8EI;;AA9EJ;AAAA;AAAA,+BA+Ee;AACP,WAAKL,MAAL,CAAYiB,cAAZ;;AACA,WAAKzB,aAAL,EAAoB,KAAKQ,MAAzB;AACH;AAlFL;AAAA;AAAA,6BAoFakB,QApFb,EAoFuB;AACf,UAAI,KAAKnE,KAAL,KAAe,IAAf,IAAuB,QAAO,KAAKA,KAAZ,KAAqB,QAAhD,EAA0D;AACtD,aAAKA,KAAL,GAAamE,QAAb,CADsD,CAEtD;;AACA,aAAKN,MAAL;AACA;AACH;;AACD,UAAIO,KAAK,GAAG,SAARA,KAAQ,CAACC,QAAD,EAAWF,QAAX,EAAwB;AAChC,aAAK,IAAIG,CAAT,IAAcH,QAAd,EAAwB;AACpB;AACA,cAAIE,QAAQ,CAACC,CAAD,CAAR,KAAgB,IAAhB,IAAwB,QAAOD,QAAQ,CAACC,CAAD,CAAf,KAAsB,QAAlD,EAA4D;AACxDD,oBAAQ,CAACC,CAAD,CAAR,GAAcH,QAAQ,CAACG,CAAD,CAAtB;AACH,WAFD,MAEM;AACFF,iBAAK,CAACC,QAAQ,CAACC,CAAD,CAAT,EAAcH,QAAQ,CAACG,CAAD,CAAtB,CAAL;AACH;AACJ;AACJ,OATD;;AAUAF,WAAK,CAAC,KAAKpE,KAAN,EAAamE,QAAb,CAAL,CAjBe,CAkBf;;AACA,WAAKN,MAAL;AACH;AAxGL;AAAA;AAAA,wBA2Be;AACP;AACA;AACA,aAAO,KAAK3B,MAAL,GAAcoB,IAArB;AACH;AA/BL;;AAAA;AAAA;AA2GO,IAAMiB,cAAb;AAAA;;AAAA;;AACI,0BAAYb,IAAZ,EAAkB;AAAA;;AAAA;;AACd;AACA,UAAKA,IAAL,GAAYA,IAAZ;AAFc;AAGjB;;AAJL;AAAA,SAMKjB,aANL;AAAA,0BAMoBY,KANpB,EAM2B;AACnB,WAAKJ,MAAL,GAAcI,KAAd,CADmB,CAEnB;AACA;;AACA,UAAImB,IAAI,GAAGrC,QAAQ,CAACsC,aAAT,CAAuB,KAAKf,IAA5B,CAAX;;AACA,WAAK,IAAIR,IAAT,IAAiB,KAAK5C,KAAtB,EAA6B;AACzB,YAAIE,KAAK,GAAG,KAAKF,KAAL,CAAW4C,IAAX,CAAZ;;AACA,YAAIA,IAAI,KAAK,WAAb,EAA0B;AACtBsB,cAAI,CAACE,YAAL,CAAkB,OAAlB,EAA2BlE,KAA3B;AACA;AACH;;AACD,YAAK0C,IAAI,CAACyB,KAAL,CAAW,cAAX,CAAL,EAAkC;AAC9B,cAAIC,IAAI,GAAGC,MAAM,CAACC,EAAlB;AACAN,cAAI,CAACO,gBAAL,CAAsBH,IAAI,CAACI,OAAL,CAAaJ,IAAI,CAAC,CAAD,CAAjB,EAAsBA,IAAI,CAAC,CAAD,CAAJ,CAAQK,WAAR,EAAtB,CAAtB,EAAoEzE,KAApE;AACA;AACH;;AACDgE,YAAI,CAACE,YAAL,CAAkBxB,IAAlB,EAAwB1C,KAAxB;AACH,OAjBkB,CAkBnB;AACA;AACA;AACA;AACA;;;AAtBmB,iDAuBD,KAAKwC,SAvBJ;AAAA;;AAAA;AAuBnB,4DAAkC;AAAA,cAAzBG,KAAyB;;AAC9B,cAAIE,MAAK,GAAGlB,QAAQ,CAAC+C,WAAT,EAAZ;;AACA7B,gBAAK,CAAC8B,QAAN,CAAeX,IAAf,EAAqBA,IAAI,CAACY,UAAL,CAAgB/D,MAArC;;AACAgC,gBAAK,CAACgC,MAAN,CAAab,IAAb,EAAmBA,IAAI,CAACY,UAAL,CAAgB/D,MAAnC;;AACA8B,eAAK,CAACV,aAAD,CAAL,CAAqBY,MAArB;AACH,SA5BkB,CA6BnB;AACA;;AA9BmB;AAAA;AAAA;AAAA;AAAA;;AA+BnBiC,kBAAY,CAACjC,KAAD,EAAQmB,IAAR,CAAZ;AACH;AAtCL;AAAA;AAAA,wBAwCe;AACP;AACA,WAAKxB,SAAL,GAAiB,KAAKD,QAAL,CAAcpB,GAAd,CAAkB,UAAAwB,KAAK;AAAA,eAAIA,KAAK,CAACG,IAAV;AAAA,OAAvB,CAAjB,CAFO,CAGP;;AACA,aAAO,IAAP;AACH;AA7CL;;AAAA;AAAA,EAAoClD,SAApC;;AA+CA,SAASkF,YAAT,CAAuBjC,KAAvB,EAA8BkC,IAA9B,EAAoC;AAChClC,OAAK,CAACmC,UAAN,CAAiBD,IAAjB;AACAlC,OAAK,CAACoC,aAAN,CAAoBF,IAApB;AACAlC,OAAK,CAACa,cAAN;AACAb,OAAK,CAACqC,cAAN,CAAqBH,IAArB;AACAlC,OAAK,CAACsC,WAAN,CAAkBJ,IAAlB;AACH;;AACM,IAAMK,WAAb;AAAA;;AAAA;;AACI,uBAAYhC,OAAZ,EAAqB;AAAA;;AAAA;;AACjB,gCADiB,CAEjB;;AACA,WAAKF,IAAL,GAAY,OAAZ;AACA,WAAKE,OAAL,GAAeA,OAAf;AAJiB;AAKpB;;AANL;AAAA,SAQKnB,aARL;AAAA,0BAQoBY,KARpB,EAQ2B;AACnB,WAAKJ,MAAL,GAAcI,KAAd;AACA,UAAImB,IAAI,GAAGrC,QAAQ,CAAC0D,cAAT,CAAwB,KAAKjC,OAA7B,CAAX,CAFmB,CAGnB;AACA;;AACA0B,kBAAY,CAACjC,KAAD,EAAQmB,IAAR,CAAZ;AACH;AAdL;AAAA;AAAA,wBAgBe;AACP;AACA,aAAO,IAAP;AACH;AAnBL;;AAAA;AAAA,EAAiCpE,SAAjC;AAuBO,SAASqE,aAAT,CAAwBqB,OAAxB,EAAiCC,UAAjC,EAA0D;AAC7D,MAAIC,GAAJ;;AACA,MAAI,OAAOF,OAAP,KAAmB,QAAvB,EAAiC;AAC7BE,OAAG,GAAG,IAAIzB,cAAJ,CAAmBuB,OAAnB,CAAN;AACH,GAFD,MAEM,IAAI,OAAOA,OAAP,KAAmB,UAAnB,IAAiC,QAAOA,OAAP,MAAmB,QAAxD,EAAiE;AACnEE,OAAG,GAAG,IAAIF,OAAJ,EAAN;AACH;;AACD,OAAK,IAAI5C,IAAT,IAAiB6C,UAAjB,EAA6B;AACzBC,OAAG,CAACtB,YAAJ,CAAiBxB,IAAjB,EAAuB6C,UAAU,CAAC7C,IAAD,CAAjC;AACH;;AAED,WAAS+C,cAAT,CAAwBlD,QAAxB,EAAkC;AAAA,gDACZA,QADY;AAAA;;AAAA;AAC9B,6DAA4B;AAAA,YAAnBI,KAAmB;AACxB,YAAIA,KAAK,KAAK,IAAd,EAAoB;;AACpB,YAAI,QAAOA,KAAP,MAAiB,QAArB,EAA+B;AAC3B,cAAIA,KAAK,YAAYpC,KAArB,EACIkF,cAAc,CAAC9C,KAAD,CAAd,CADJ,KAGI6C,GAAG,CAACE,WAAJ,CAAgB/C,KAAhB;AACP,SALD,MAKM;AACFA,eAAK,GAAG,IAAIyC,WAAJ,CAAgBzC,KAAhB,CAAR;AACA6C,aAAG,CAACE,WAAJ,CAAgB/C,KAAhB;AACH;AACJ;AAZ6B;AAAA;AAAA;AAAA;AAAA;AAajC;;AAxB4D,oCAAVJ,QAAU;AAAVA,YAAU;AAAA;;AA0B7DkD,gBAAc,CAAClD,QAAD,CAAd;AAEA,SAAOiD,GAAP;AACH;AAEM,SAAS9D,MAAT,CAAgBiE,SAAhB,EAA2BC,SAA3B,EAAsC;AACzC,MAAI/C,KAAK,GAAGlB,QAAQ,CAAC+C,WAAT,EAAZ;AACA7B,OAAK,CAAC8B,QAAN,CAAeiB,SAAf,EAA0B,CAA1B;AACA/C,OAAK,CAACgC,MAAN,CAAae,SAAb,EAAwBA,SAAS,CAAChB,UAAV,CAAqB/D,MAA7C;AACAgC,OAAK,CAACa,cAAN;AACAiC,WAAS,CAAC1D,aAAD,CAAT,CAAyBY,KAAzB;AACH,C;;;;;;UC/ND;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCrBA;WACA;WACA;WACA;WACA,wCAAwC,yCAAyC;WACjF;WACA;WACA,E;;;;;WCPA,sF;;;;;WCAA;WACA;WACA;WACA,sDAAsD,kBAAkB;WACxE;WACA,+CAA+C,cAAc;WAC7D,E;;;;UCNA;UACA;UACA;UACA","file":"main.js","sourcesContent":["import { createElement, ElementWrapper, TextWrapper, render, Component } from './toy-react';\n\n\nclass MyConponent extends Component {\n    constructor() {\n        super();\n        this.state = {\n            a: 1,\n            b: 2\n        }\n    }\n    render() {\n        debugger\n        return (\n            <div>\n                {/* <h1>title</h1> */}\n                {/* <h2>title2</h2> */}\n                <p style=\"color: pink;font-size:24px;\">\n                    {this.state.a}\n                </p>\n                <button id=\"bt\" onclick={() => { this.setState({ a: this.state.a+1 }) }}>add</button>\n                {/* { this.children} */}\n            </div>\n        );\n    }\n\n}\n\n// let domDiv = <MyConponent class=\"app\" style=\"color: red;text-align:center;\">\n//     {/* <p style=\"font-size:36px;\">content</p>\n//     <img src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K\"></img> */}\n// </MyConponent>\n\n// render(domDiv, document.body);\nclass Square extends Component {\n    constructor() {\n        super();\n    }\n\n    render() {\n        return (\n            <button className=\"square\" onClick={this.props.onClick}>\n                {this.props.value}\n            </button>\n        );\n    }\n}\n\nclass Board extends Component {\n    renderSquare(i) {\n        return (\n            <Square\n                value={this.props.squares[i]}\n                onClick={() => this.props.onClick(i)}\n            />\n        );\n    }\n\n    render() {\n        return (\n            <div>\n                <div className=\"board-row\">\n                    {this.renderSquare(0)}\n                    {this.renderSquare(1)}\n                    {this.renderSquare(2)}\n                </div>\n                <div className=\"board-row\">\n                    {this.renderSquare(3)}\n                    {this.renderSquare(4)}\n                    {this.renderSquare(5)}\n                </div>\n                <div className=\"board-row\">\n                    {this.renderSquare(6)}\n                    {this.renderSquare(7)}\n                    {this.renderSquare(8)}\n                </div>\n            </div>\n        );\n    }\n}\n\nclass Game extends Component {\n    constructor() {\n        super();\n        this.state = {\n            history: [\n                {\n                    squares: Array(9).fill(null)\n                }\n            ],\n            stepNumber: 0,\n            xIsNext: true\n        };\n    }\n\n    handleClick(i) {\n        debugger\n        const history = this.state.history.slice(0, this.state.stepNumber + 1);\n        const current = history[history.length - 1];\n        const squares = current.squares.slice();\n        if (calculateWinner(squares) || squares[i]) {\n            return;\n        }\n        squares[i] = this.state.xIsNext ? \"X\" : \"O\";\n        this.setState({\n            history: history.concat([\n                {\n                    squares: squares\n                }\n            ]),\n            stepNumber: history.length,\n            xIsNext: !this.state.xIsNext\n        });\n    }\n\n    jumpTo(step) {\n        this.setState({\n            stepNumber: step,\n            xIsNext: (step % 2) === 0\n        });\n    }\n\n    render() {\n        const history = this.state.history;\n        const current = history[this.state.stepNumber];\n        const winner = calculateWinner(current.squares);\n\n        const moves = history.map((step, move) => {\n            const desc = move ?\n                'Go to move #' + move :\n                'Go to game start';\n            return (\n                <li key={move}>\n                    <button onClick={() => this.jumpTo(move)}>{desc}</button>\n                </li>\n            );\n        });\n\n        let status;\n        if (winner) {\n            status = \"Winner: \" + winner;\n        } else {\n            status = \"Next player: \" + (this.state.xIsNext ? \"X\" : \"O\");\n        }\n\n        return (\n            <div className=\"game\">\n                <div className=\"game-board\">\n                    <Board\n                        squares={current.squares}\n                        onClick={i => this.handleClick(i)}\n                    />\n                </div>\n                <div className=\"game-info\">\n                    <div>{status}</div>\n                    <ol>{moves}</ol>\n                </div>\n            </div>\n        );\n    }\n}\n\n// ========================================\nlet game = <Game/>\nrender(game, document.getElementById(\"root\"));\nconsole.log(game);\n\nfunction calculateWinner(squares) {\n    const lines = [\n        [0, 1, 2],\n        [3, 4, 5],\n        [6, 7, 8],\n        [0, 3, 6],\n        [1, 4, 7],\n        [2, 5, 8],\n        [0, 4, 8],\n        [2, 4, 6]\n    ];\n    for (let i = 0; i < lines.length; i++) {\n        const [a, b, c] = lines[i];\n        if (squares[a] && squares[a] === squares[b] && squares[a] === squares[c]) {\n            return squares[a];\n        }\n    }\n    return null;\n}\n","const RENDER_TO_DOM = Symbol('render_to_dom');\n\nexport class Component {\n    constructor() {\n        this.props = Object.create(null);\n        this._root = null;\n        this._vdom = null;\n        this.children = [];\n        this.vchildren = [];\n        this._range = null;\n    }\n\n    setAttribute(attr, value) {\n        this.props[attr] = value;\n    }\n    \n    appendChild(child) {\n        this.children.push(child);\n        // this.vchildren.push(child.vdom);\n    }\n\n    [RENDER_TO_DOM](range) {\n        this._range = range;\n        // this.render()[RENDER_TO_DOM](range);\n        // 保存旧 vdom\n        this._vdom = this.vdom;\n        this._vdom[RENDER_TO_DOM](range);\n    }\n\n    get vdom() {\n        // console.log('render')\n        // console.log(this);\n        return this.render().vdom;\n    }\n\n    update() {\n        let isSameNode = (oldNode, newNode) => {\n            if (oldNode.type !== newNode.type)\n                return false;\n            for (let attr in newNode.props) {\n                if (oldNode.props[attr] !== newNode.props[attr])\n                    return false;\n            }\n            if (Object.keys(oldNode.props).length > Object.keys(newNode.props).length)\n                return false;\n            if (newNode.type === '#text') {\n                if (newNode.content !== oldNode.content)\n                    return false;\n            }\n\n            return true;\n        }\n        let update = (oldNode, newNode) => {\n            // type props children\n            if (!isSameNode(oldNode, newNode)) {\n                newNode[RENDER_TO_DOM](oldNode._range);\n                return;\n            }\n            newNode._range = oldNode._range;\n\n            let newChildren = newNode.vchildren;\n            let oldChildren = oldNode.vchildren;\n\n            for(let i = 0;i < newChildren.length;i ++) {\n                let newChild = newChildren[i];\n                let oldChild = oldChildren[i];\n                if (i < oldChildren.length) {\n                    update(oldChild, newChild);\n                }else {\n                    // TODO\n                    newNode[RENDER_TO_DOM](oldNode._range);\n                }\n            }\n        }\n        let vdom = this.vdom;  // 重新生成的vdom树，没有range信息\n        update(this._vdom, vdom);\n        // this._vdom = this.vdom;   // 又是一个致命失误\n        this._vdom = vdom;\n    }\n\n    // 重新渲染\n    rerender() {\n        this._range.deleteContents();\n        this[RENDER_TO_DOM](this._range);\n    }\n\n    setState(newState) {\n        if (this.state === null || typeof this.state != 'object') {\n            this.state = newState;\n            // this.rerender();\n            this.update();\n            return;\n        }\n        let merge = (oldState, newState) => {\n            for (let p in newState) {\n                // 注意： typeof null === 'object'\n                if (oldState[p] === null || typeof oldState[p] != 'object') {\n                    oldState[p] = newState[p];\n                }else {\n                    merge(oldState[p], newState[p]);\n                }\n            }\n        }\n        merge(this.state, newState);\n        // this.rerender();\n        this.update();\n    }\n}\n\nexport class ElementWrapper extends Component {\n    constructor(type) {\n        super();\n        this.type = type;\n    }\n\n    [RENDER_TO_DOM](range) {\n        this._range = range;\n        // vdom => dom\n        // let root = document.createElement(this.vdom.type);   //致命失误，千万不能有冗余的vdom访问\n        let root = document.createElement(this.type);\n        for (let attr in this.props) {\n            let value = this.props[attr];\n            if (attr === 'className') {\n                root.setAttribute('class', value);\n                continue;\n            }\n            if ( attr.match(/^on([\\s\\S]+)/) ) {\n                let name = RegExp.$1;\n                root.addEventListener(name.replace(name[0], name[0].toLowerCase()), value);\n                continue;\n            }\n            root.setAttribute(attr, value);\n        }\n        // if (!this.vchildren) {\n        //     this.vchildren = this.children.map(child => child.vdom);\n        // }\n        // 为什么这里用成this.children 就不行 🚫, range 会是空。（this.children可能是Component实例，\n        // 调用Component.[RENDER_TO_DOM]会造成冗余的vmod读取(this.render().vdom)，render会造成递归的子节点_range信息置为null）\n        for (let child of this.vchildren) {\n            let range = document.createRange();\n            range.setStart(root, root.childNodes.length);\n            range.setEnd(root, root.childNodes.length);\n            child[RENDER_TO_DOM](range);\n        }\n        // range.deleteContents();\n        // range.insertNode(root);\n        replaceRange(range, root);\n    }\n\n    get vdom() {\n        // 由于调用了child.vdom，有个实时跟新的效果\n        this.vchildren = this.children.map(child => child.vdom);\n        // console.log(this);\n        return this;\n    }\n}\nfunction replaceRange (range, node) {\n    range.insertNode(node);\n    range.setStartAfter(node);\n    range.deleteContents();\n    range.setStartBefore(node);\n    range.setEndAfter(node);\n}\nexport class TextWrapper extends Component{\n    constructor(content) {\n        super();\n        // this.root = document.createTextNode(content);\n        this.type = \"#text\";\n        this.content = content;\n    }\n\n    [RENDER_TO_DOM](range) {\n        this._range = range;\n        let root = document.createTextNode(this.content);\n        // range.deleteContents();\n        // range.insertNode(root);\n        replaceRange(range, root);\n    }\n\n    get vdom() {\n        // console.log(this);\n        return this;\n    }\n}\n\n\nexport function createElement (tagName, attributes, ...children) {\n    let dom;\n    if (typeof tagName === 'string') {\n        dom = new ElementWrapper(tagName);\n    }else if (typeof tagName === 'function' || typeof tagName === 'object'){\n        dom = new tagName;\n    }\n    for (let attr in attributes) {\n        dom.setAttribute(attr, attributes[attr]);\n    }\n\n    function handleChildren(children) {\n        for (let child of children) {\n            if (child === null) continue;\n            if (typeof child === 'object') {\n                if (child instanceof Array)\n                    handleChildren(child);\n                else \n                    dom.appendChild(child);\n            }else {\n                child = new TextWrapper(child)\n                dom.appendChild(child);\n            }\n        }\n    }\n\n    handleChildren(children);\n    \n    return dom;\n}\n\nexport function render(component, parentDom) {\n    let range = document.createRange();\n    range.setStart(parentDom, 0);\n    range.setEnd(parentDom, parentDom.childNodes.length);\n    range.deleteContents();\n    component[RENDER_TO_DOM](range);\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module\n__webpack_require__(\"./main.js\");\n// This entry module used 'exports' so it can't be inlined\n"],"sourceRoot":""}