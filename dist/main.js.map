{"version":3,"sources":["webpack://toy-react/./main.js","webpack://toy-react/./toy-react.js","webpack://toy-react/webpack/bootstrap","webpack://toy-react/webpack/runtime/define property getters","webpack://toy-react/webpack/runtime/hasOwnProperty shorthand","webpack://toy-react/webpack/runtime/make namespace object","webpack://toy-react/webpack/startup"],"names":["MyConponent","state","a","b","setState","Component","domDiv","render","document","body","Square","props","onClick","value","Board","i","squares","renderSquare","Game","history","Array","fill","stepNumber","xIsNext","slice","current","length","calculateWinner","concat","step","winner","moves","map","move","desc","jumpTo","status","handleClick","game","lines","c","RENDER_TO_DOM","Symbol","Object","create","_root","_vdom","children","vchildren","_range","attr","child","push","vdom","range","isSameNode","oldNode","newNode","type","keys","content","update","newChildren","oldChildren","newChild","oldChild","deleteContents","newState","merge","oldState","p","ElementWrapper","root","createElement","setAttribute","match","name","RegExp","$1","addEventListener","replace","toLowerCase","createRange","setStart","childNodes","setEnd","insertNode","TextWrapper","createTextNode","tagName","attributes","dom","handleChildren","appendChild","component","parentDom"],"mappings":"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","file":"main.js","sourcesContent":["import { createElement, ElementWrapper, TextWrapper, render, Component } from './toy-react';\r\n\r\n\r\nclass MyConponent extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            a: 1,\r\n            b: 2\r\n        }\r\n    }\r\n    render() {\r\n        debugger\r\n        return (\r\n            <div>\r\n                {/* <h1>title</h1> */}\r\n                {/* <h2>title2</h2> */}\r\n                <p style=\"color: pink;font-size:24px;\">\r\n                    {this.state.a}\r\n                </p>\r\n                <button id=\"bt\" onclick={() => { this.setState({ a: this.state.a+1 }) }}>add</button>\r\n                {/* { this.children} */}\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nlet domDiv = <MyConponent class=\"app\" style=\"color: red;text-align:center;\">\r\n    {/* <p style=\"font-size:36px;\">content</p>\r\n    <img src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K\"></img> */}\r\n</MyConponent>\r\n\r\nrender(domDiv, document.body);\r\nclass Square extends Component {\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <button className=\"square\" onClick={this.props.onClick}>\r\n                {this.props.value}\r\n            </button>\r\n        );\r\n    }\r\n}\r\n\r\nclass Board extends Component {\r\n    renderSquare(i) {\r\n        return (\r\n            <Square\r\n                value={this.props.squares[i]}\r\n                onClick={() => this.props.onClick(i)}\r\n            />\r\n        );\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <div className=\"board-row\">\r\n                    {this.renderSquare(0)}\r\n                    {this.renderSquare(1)}\r\n                    {this.renderSquare(2)}\r\n                </div>\r\n                <div className=\"board-row\">\r\n                    {this.renderSquare(3)}\r\n                    {this.renderSquare(4)}\r\n                    {this.renderSquare(5)}\r\n                </div>\r\n                <div className=\"board-row\">\r\n                    {this.renderSquare(6)}\r\n                    {this.renderSquare(7)}\r\n                    {this.renderSquare(8)}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nclass Game extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            history: [\r\n                {\r\n                    squares: Array(9).fill(null)\r\n                }\r\n            ],\r\n            stepNumber: 0,\r\n            xIsNext: true\r\n        };\r\n    }\r\n\r\n    handleClick(i) {\r\n        const history = this.state.history.slice(0, this.state.stepNumber + 1);\r\n        const current = history[history.length - 1];\r\n        const squares = current.squares.slice();\r\n        if (calculateWinner(squares) || squares[i]) {\r\n            return;\r\n        }\r\n        squares[i] = this.state.xIsNext ? \"X\" : \"O\";\r\n        this.setState({\r\n            history: history.concat([\r\n                {\r\n                    squares: squares\r\n                }\r\n            ]),\r\n            stepNumber: history.length,\r\n            xIsNext: !this.state.xIsNext\r\n        });\r\n    }\r\n\r\n    jumpTo(step) {\r\n        this.setState({\r\n            stepNumber: step,\r\n            xIsNext: (step % 2) === 0\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const history = this.state.history;\r\n        const current = history[this.state.stepNumber];\r\n        const winner = calculateWinner(current.squares);\r\n\r\n        const moves = history.map((step, move) => {\r\n            const desc = move ?\r\n                'Go to move #' + move :\r\n                'Go to game start';\r\n            return (\r\n                <li key={move}>\r\n                    <button onClick={() => this.jumpTo(move)}>{desc}</button>\r\n                </li>\r\n            );\r\n        });\r\n\r\n        let status;\r\n        if (winner) {\r\n            status = \"Winner: \" + winner;\r\n        } else {\r\n            status = \"Next player: \" + (this.state.xIsNext ? \"X\" : \"O\");\r\n        }\r\n\r\n        return (\r\n            <div className=\"game\">\r\n                <div className=\"game-board\">\r\n                    <Board\r\n                        squares={current.squares}\r\n                        onClick={i => this.handleClick(i)}\r\n                    />\r\n                </div>\r\n                <div className=\"game-info\">\r\n                    <div>{status}</div>\r\n                    <ol>{moves}</ol>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n// ========================================\r\nlet game = <Game/>\r\n// console.log(game.vdom);\r\n// render(game, document.getElementById(\"root\"));\r\n\r\nfunction calculateWinner(squares) {\r\n    const lines = [\r\n        [0, 1, 2],\r\n        [3, 4, 5],\r\n        [6, 7, 8],\r\n        [0, 3, 6],\r\n        [1, 4, 7],\r\n        [2, 5, 8],\r\n        [0, 4, 8],\r\n        [2, 4, 6]\r\n    ];\r\n    for (let i = 0; i < lines.length; i++) {\r\n        const [a, b, c] = lines[i];\r\n        if (squares[a] && squares[a] === squares[b] && squares[a] === squares[c]) {\r\n            return squares[a];\r\n        }\r\n    }\r\n    return null;\r\n}\r\n","const RENDER_TO_DOM = Symbol('render_to_dom');\r\n\r\nexport class Component {\r\n    constructor() {\r\n        this.props = Object.create(null);\r\n        this._root = null;\r\n        this._vdom = null;\r\n        this.children = [];\r\n        this.vchildren = [];\r\n        this._range = null;\r\n    }\r\n\r\n    setAttribute(attr, value) {\r\n        this.props[attr] = value;\r\n    }\r\n    \r\n    appendChild(child) {\r\n        this.children.push(child);\r\n        this.vchildren.push(child.vdom);\r\n    }\r\n\r\n    [RENDER_TO_DOM](range) {\r\n        this._range = range;\r\n        // this.render()[RENDER_TO_DOM](range);\r\n        // 保存旧 vdom\r\n        this._vdom = this.vdom;\r\n        this._vdom[RENDER_TO_DOM](range);\r\n    }\r\n\r\n    get vdom() {\r\n        // console.log('render')\r\n        // console.log(this);\r\n        return this.render().vdom;\r\n    }\r\n\r\n    update() {\r\n        let isSameNode = (oldNode, newNode) => {\r\n            if (oldNode.type !== newNode.type)\r\n                return false;\r\n            for (let attr in newNode.props) {\r\n                if (oldNode.props[attr] !== newNode.props[attr])\r\n                    return false;\r\n            }\r\n            if (Object.keys(oldNode.props).length > Object.keys(newNode.props).length)\r\n                return false;\r\n            if (newNode.type === '#text') {\r\n                if (newNode.content !== oldNode.content)\r\n                    return false;\r\n            }\r\n\r\n            return true;\r\n        }\r\n        let update = (oldNode, newNode) => {\r\n            // type props children\r\n            if (!isSameNode(oldNode, newNode)) {\r\n                newNode[RENDER_TO_DOM](oldNode._range);\r\n                return;\r\n            }\r\n            newNode._range = oldNode._range;\r\n\r\n            let newChildren = newNode.vchildren;\r\n            let oldChildren = oldNode.vchildren;\r\n\r\n            for(let i = 0;i < newChildren.length;i ++) {\r\n                let newChild = newChildren[i];\r\n                let oldChild = oldChildren[i];\r\n                if (i < oldChildren.length) {\r\n                    update(oldChild, newChild);\r\n                }else {\r\n                    // TODO\r\n                }\r\n            }\r\n        }\r\n        let vdom = this.vdom;  // 重新生成的vdom树，没有range信息\r\n        update(this._vdom, vdom);\r\n        // this._vdom = this.vdom;   // 又是一个致命失误\r\n        this._vdom = vdom;\r\n    }\r\n\r\n    // 重新渲染\r\n    rerender() {\r\n        this._range.deleteContents();\r\n        this[RENDER_TO_DOM](this._range);\r\n    }\r\n\r\n    setState(newState) {\r\n        if (this.state === null || typeof this.state != 'object') {\r\n            this.state = newState;\r\n            // this.rerender();\r\n            this.update();\r\n            return;\r\n        }\r\n        let merge = (oldState, newState) => {\r\n            for (let p in newState) {\r\n                // 注意： typeof null === 'object'\r\n                if (oldState[p] === null || typeof oldState[p] != 'object') {\r\n                    oldState[p] = newState[p];\r\n                }else {\r\n                    merge(oldState[p], newState[p]);\r\n                }\r\n            }\r\n        }\r\n        merge(this.state, newState);\r\n        // this.rerender();\r\n        this.update();\r\n    }\r\n}\r\n\r\nexport class ElementWrapper extends Component {\r\n    constructor(type) {\r\n        super();\r\n        this.type = type;\r\n    }\r\n\r\n    [RENDER_TO_DOM](range) {\r\n        this._range = range;\r\n        // vdom => dom\r\n        // let root = document.createElement(this.vdom.type);   //致命失误，千万不能有冗余的vdom访问\r\n        let root = document.createElement(this.type);\r\n        for (let attr in this.props) {\r\n            let value = this.props[attr];\r\n            if (attr === 'className') {\r\n                root.setAttribute('class', value);\r\n                continue;\r\n            }\r\n            if ( attr.match(/^on([\\s\\S]+)/) ) {\r\n                let name = RegExp.$1;\r\n                root.addEventListener(name.replace(name[0], name[0].toLowerCase()), value);\r\n                continue;\r\n            }\r\n            root.setAttribute(attr, value);\r\n        }\r\n        for (let child of this.children) {\r\n            let range = document.createRange();\r\n            range.setStart(root, root.childNodes.length);\r\n            range.setEnd(root, root.childNodes.length);\r\n            child[RENDER_TO_DOM](range);\r\n        }\r\n        range.deleteContents();\r\n        range.insertNode(root);\r\n    }\r\n\r\n    get vdom() {\r\n        // console.log(this);\r\n        return this;\r\n    }\r\n}\r\n\r\nexport class TextWrapper extends Component{\r\n    constructor(content) {\r\n        super();\r\n        // this.root = document.createTextNode(content);\r\n        this.type = \"#text\";\r\n        this.content = content;\r\n    }\r\n\r\n    [RENDER_TO_DOM](range) {\r\n        this._range = range;\r\n        let root = document.createTextNode(this.content);\r\n        range.deleteContents();\r\n        range.insertNode(root);\r\n    }\r\n\r\n    get vdom() {\r\n        // console.log(this);\r\n        return this;\r\n    }\r\n}\r\n\r\n\r\nexport function createElement (tagName, attributes, ...children) {\r\n    let dom;\r\n    if (typeof tagName === 'string') {\r\n        dom = new ElementWrapper(tagName);\r\n    }else if (typeof tagName === 'function' || typeof tagName === 'object'){\r\n        dom = new tagName;\r\n    }\r\n    for (let attr in attributes) {\r\n        dom.setAttribute(attr, attributes[attr]);\r\n    }\r\n\r\n    function handleChildren(children) {\r\n        for (let child of children) {\r\n            if (child === null) continue;\r\n            if (typeof child === 'object') {\r\n                if (child instanceof Array)\r\n                    handleChildren(child);\r\n                else \r\n                    dom.appendChild(child);\r\n            }else {\r\n                child = new TextWrapper(child)\r\n                dom.appendChild(child);\r\n            }\r\n        }\r\n    }\r\n\r\n    handleChildren(children);\r\n    \r\n    return dom;\r\n}\r\n\r\nexport function render(component, parentDom) {\r\n    let range = document.createRange();\r\n    range.setStart(parentDom, 0);\r\n    range.setEnd(parentDom, parentDom.childNodes.length);\r\n    range.deleteContents();\r\n    component[RENDER_TO_DOM](range);\r\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module\n__webpack_require__(\"./main.js\");\n// This entry module used 'exports' so it can't be inlined\n"],"sourceRoot":""}